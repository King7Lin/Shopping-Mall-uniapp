(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/car/car"],{22:function(e,n,t){"use strict";(function(e){t(5);o(t(3));var n=o(t(23));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t(1)["createPage"])},23:function(e,n,t){"use strict";t.r(n);var o=t(24),c=t(26);for(var r in c)"default"!==r&&function(e){t.d(n,e,(function(){return c[e]}))}(r);t(31);var s,u=t(11),i=Object(u["default"])(c["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);i.options.__file="pages/car/car.vue",n["default"]=i.exports},24:function(e,n,t){"use strict";t.r(n);var o=t(25);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},25:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return c})),t.d(n,"staticRenderFns",(function(){return s})),t.d(n,"recyclableRender",(function(){return r})),t.d(n,"components",(function(){return o}));var c=function(){var e=this,n=e.$createElement;e._self._c},r=!1,s=[];c._withStripped=!0},26:function(e,n,t){"use strict";t.r(n);var o=t(27),c=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=c.a},27:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(t(28));function c(e){return e&&e.__esModule?e:{default:e}}function r(e,n,t,o,c,r,s){try{var u=e[r](s),i=u.value}catch(a){return void t(a)}u.done?n(i):Promise.resolve(i).then(o,c)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(o,c){var s=e.apply(n,t);function u(e){r(s,o,c,u,i,"next",e)}function i(e){r(s,o,c,u,i,"throw",e)}u(void 0)}))}}var u=function(){t.e("components/commodity").then(function(){return resolve(t(151))}.bind(null,t)).catch(t.oe)},i={data:function(){return{shop:[],value:1,checkedAll:!1,checked:!1,result:[],num:1,price:0,user_id:getApp().globalData.user_id}},methods:{reduce:function(e){console.log(e),e[0].checked=!1,0==e[0].checked?(e[0].num>1?e[0].num--:e[0].num=1,this.price=this.price):e[0].num>1?(e[0].num--,this.show(e)):e[0].num=1},add:function(e){0==e[0].checked?e[0].num++:(e[0].num++,this.show(e))},to:function(n){console.log(n),e.navigateTo({url:"../details/details?shop_id="+n})},show:function(e){0==e[0].checked?(e[0].checked=!0,this.price+=100*e[0].price*e[0].num):(e[0].checked=!1,this.price-=100*e[0].price*e[0].num),console.log(e)},Allchecked:function(e){0==this.checked?(this.checked=!0,this.shop.forEach((function(e){e[0].checked=!0}))):(this.checked=!1,this.shop.forEach((function(e){e[0].checked=!1}))),console.log(this.checked)},right:function(n,t){var o=this,c=this;console.log(c),console.log(n),e.request({url:"http://47.94.11.39:3007/all/deleteCart?user_id="+this.user_id+"&shop_id="+n.shop_id,success:function(e){console.log(e),1==e.data.status?o.$notify({type:"danger",message:"删除失败,请联系客服"}):(o.shop.splice(t,1),console.log(o.shop,t),o.$notify({type:"success",message:"删除成功"}),c.getshop())}})},onSubmit:function(n){var t=this;console.log(n);var o=[],c=[],r=[];this.shop.forEach((function(e){1==e[0].checked&&(o.push([e[0].shop_id,e[0].num]),c.push({shop:e[0],id:1}),r.push(e[0].desc))})),console.log(o),o.length<1?e.showToast({title:"请选择商品",icon:"error"}):(console.log(o),e.request({url:"http://47.94.11.39:3007/all/insertOrder",method:"post",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:this.user_id,shop_id:o,desc:r},success:function(n){console.log(n);var o=n.data.id;console.log(o);var c=[];t.shop.forEach((function(e){1==e[0].checked&&c.push(e[0])}));var r=JSON.stringify(c);console.log(c),1==n.data.status?e.showToast({title:"操作失败",icon:"error"}):e.navigateTo({url:"../settlement/settlement?id="+o+"&shop="+r})}}),console.log(c))},getshop:function(){var n=this;e.request({url:"http://47.94.11.39:3007/all/selectcart?user_id="+this.user_id,success:function(e){console.log(e),n.shop=e.data}})}},components:{commodity:u},computed:{one_checked:function(){return this.shop.reduce((function(e,n){return 1==n[0].checked&&(e+=n[0].price*n[0].num*100),e}),0)}},mounted:function(){var e=this;return s(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("mounted"),n.next=3,e.getshop();case 3:case"end":return n.stop()}}),n)})))()},onTabItemTap:function(e){var n=this;return s(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("onTabItemTap"),e.next=3,n.getshop();case 3:case"end":return e.stop()}}),e)})))()},onShow:function(){var e=this;return s(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("onShow"),n.next=3,e.getshop();case 3:case"end":return n.stop()}}),n)})))()},onPullDownRefresh:function(){console.log("onPullDownRefresh"),this.getshop()}};n.default=i}).call(this,t(1)["default"])},31:function(e,n,t){"use strict";t.r(n);var o=t(32),c=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=c.a},32:function(e,n,t){}},[[22,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/car/car.js.map